INCLUDE(${VXL_CMAKE_DIR}/FindPNG.cmake)

INCLUDE_DIRECTORIES(${PNG_INCLUDE_DIR})
IF (UNIX)
  LINK_LIBRARIES(m)
ENDIF (UNIX)
ADD_DEFINITIONS(${PNG_DEFINITIONS} -DPNG_FREESTANDING_TESTS)

ADD_EXECUTABLE(pngtest pngtest.c)
TARGET_LINK_LIBRARIES(pngtest ${PNG_LIBRARIES})

ADD_EXECUTABLE(pngvalid pngvalid.c)
TARGET_LINK_LIBRARIES(pngvalid ${PNG_LIBRARIES})

ADD_TEST(NAME png_test COMMAND ${EXECUTABLE_OUTPUT_PATH}/pngtest ${CMAKE_CURRENT_SOURCE_DIR}/pngtest.png)
ADD_TEST(NAME png_valid COMMAND ${EXECUTABLE_OUTPUT_PATH}/pngvalid )
